# Author: Oscar Chevalier

from pathlib import Path
import re
import csv


# Fait à la va vite dans mon kilt

parts = {'Xenon': (0.01, 0.0001),
'Ablateur': (0.01, 0.001),
'strutOcto': (0.0005, 0.001),
'strutCube': (0.0005, 0.001),
'noseconeTiny': (0.075, 0.001),
'RCSLinearSmall': (0.000625, 0.00125),
'sGripPad': (0.001, 0.002),
'RCSblock_01_small': (0.00125, 0.0025),
'restock-rcs-single-mini-1': (0.00125, 0.0025),
'restock-rcs-block-multi-mini-2': (0.00125, 0.0025),
'restock-fuel-tank-probe-2': (0.00140625, 0.0028125),
'flagPartSize0': (0, 0.003975),
'Monopropellant': (0.04, 0.004),
'noseconeVS': (0.3, 0.004),
'telescopicLadderBay': (0.0025, 0.005),
'ladder1': (0.0025, 0.005),
'telescopicLadder': (0.0025, 0.005),
'Fuel': (0.05, 0.005),
'Oxidant': (0.05, 0.005),
'restock-rcs-block-dual-mini-1': (0.0025, 0.005),
'evaCylinder': (0.0025, 0.005),
'restock-fuel-tank-probe-1': (0.0028125, 0.005625),
'restock-fuel-tank-0625-5': (0.0028125, 0.005625),
'miniIntake': (0.0035, 0.007),
'Carburant Solide': (0.075, 0.0075),
'restock-rcs-block-triple-angled-mini-1': (0.00375, 0.0075),
'flagPartSize1': (0, 0.00795),
'basicFin': (0.25, 0.01),
'Separator_0': (0.005, 0.01),
'Decoupler_0': (0.005, 0.01),
'restock-ladder-static-2': (0.005, 0.01),
'IntakeRadialLong': (0.005, 0.01),
'smallPropeller': (0.005, 0.01),
'smallFanBlade': (0.005, 0.01),
'Minerai': (0.1, 0.01),
'standardNoseCone': (10000, 0.01),
'restock-drone-core-375-1': (127.5, 0.85),
'RelayAntenna100': (97.5, 0.65),
'restock-battery-375-1': (75, 0.5),
'probeStackLarge': (75, 0.5),
'rotoServo_04': (72, 0.48),
'MpoProbe': (59.25, 0.395),
'RelayAntenna50': (45, 0.3),
'RobotArmScanner_S3': (45, 0.3),
'largeSolarPanel': (45, 0.3),
'parachuteLarge': (45, 0.3),
'restock-drone-core-1875-1': (37.5, 0.25),
'batteryBankLarge': (30, 0.2),
'HECS2_ProbeCore': (30, 0.2),
'hinge_01_s': (0.005, 0.01),
'standardNoseCone': (0.75, 0.01),
'restock-nosecone-0625-1': (0.75, 0.01),
'radPanelSm': (0.75, 0.01),
'restock-rcs-block-quad-angled-mini-1': (0.005, 0.01),
'restock-rcs-block-quad-mini-1': (0.005, 0.01),
'monopropMiniSphere': (0.005, 0.01),
'restock-fuel-tank-rcs-radial-tiny-1': (0.005, 0.01),
'Triangle0': (0.005, 0.01),
'EquiTriangle0': (0.005, 0.01),
'Triangle0': (0.005, 0.01),
'EquiTriangle0': (0.005, 0.01),
'ReleaseValve': (0.005, 0.01),
'restock-fueltank-sphere-0625-1': (0.005625, 0.01125),
'parachuteDrogue': (30, 0.2),
'mk2DroneCore': (30, 0.2),
'asasmodule1-2': (30, 0.2),
'SurveyScanner': (30, 0.2),
'science_module': (30, 0.2),
'restock-materialbay-radial-1': (30, 0.2),
'restock-relay-radial-2': (27, 0.18),
'GearFree': (0.006, 0.012),
'sGripStrip': (0.006, 0.012),
'sepMotor1': (0.00625, 0.0125),
'restock-rcs-block-qunit-mini-1': (0.00625, 0.0125),
'restock-decoupler-radial-tiny-1': (0.00625, 0.0125),
'xenonTankRadial': (0.00675, 0.0135),
'externalTankRound': (10000, 0.01375),
'externalTankRound': (0.006875, 0.01375),
'smallHeliBlade': (0.0075, 0.015),
'stackDecouplerMini': (10000, 0.015),
'restock-leg-1-rigid': (0.0075, 0.015),
'restock-node-625-1': (0.0075, 0.015),
'rotoServo_00': (0.008, 0.016),
'rotor_01s': (0.009, 0.018),
'GearFixed': (0.009, 0.018),
'mGripPad': (0.009, 0.018),
'restock-fairing-base-0625-1': (0.009375, 0.01875),
'flagPartSize1p5': (0, 0.019875),
'dockingPort3': (0.01, 0.02),
'restock-relay-radial-2_v2': (27, 0.18),
'RelayAntenna5': (22.5, 0.15),
'roverBody': (22.5, 0.15),
'restock-ladder-static-3': (0.01, 0.02),
'airScoop': (0.01, 0.02),
'radialEngineMini_v2': (0.01, 0.02),
'microEngine_v2': (0.01, 0.02),
'stackSeparatorMini': (10000, 0.02),
'dockingPort3': (0.01, 0.02),
'microEngine': (10000, 0.02),
'radialEngineMini': (10000, 0.02),
'RCSBlock_v2': (0.01, 0.02),
'linearRcs': (0.01, 0.02),
'restock-rcs-block-dual-1': (0.01, 0.02),
'restock-rcs-block-multi-2': (0.01, 0.02),
'radialRCSTank': (0.01, 0.02),
'rcsTankMini': (0.01, 0.02),
'rotor_01': (0.01, 0.02),
'Panel0': (0.01, 0.02),
'Panel0': (0.01, 0.02),
'restock-fuel-tank-0625-3': (0.01125, 0.0225),
'xenonTank': (0.012, 0.024),
'structuralWing4': (0.625, 0.025),
'HeatShield0': (0.0125, 0.025),
'radialDecoupler': (0.0125, 0.025),
'miniFuselage': (0.0125, 0.025),
'miniFuelTank': (0.0125, 0.025),
'smallClaw': (0.015, 0.03),
'noseCone': (10000, 0.03),
'linearRcs': (10000, 0.03),
'noseCone': (2.25, 0.03),
'radPanelEdge': (2.25, 0.03),
'restock-rcs-block-triple-angled-1': (0.015, 0.03),
'restock-claw-625-1': (0.015, 0.03),
'rcsTankRadialLong': (0.015, 0.03),
'piston_02': (0.016, 0.032),
'externalTankCapsule': (10000, 0.03375),
'externalTankCapsule': (0.016875, 0.03375),
'mediumFanBlade': (0.0175, 0.035),
'mediumPropeller': (0.0175, 0.035),
'flagPartSize2': (0, 0.035775),
'winglet': (0.925, 0.037),
'toroidalFuelTank': (10000, 0.0375),
'externalTankToroid': (10000, 0.0375),
'externalTankToroid': (0.01875, 0.0375),
'smallCtrlSrf': (1, 0.04),
'Decoupler_1': (0.02, 0.04),
'CircularIntake': (0.02, 0.04),
'probeCoreOcto2': (10000, 0.04),
'adapterSmallMiniShort': (10000, 0.04),
'landingLeg1-2': (0.02, 0.04),
'miniLandingLeg': (0.02, 0.04),
'landingLeg1': (0.02, 0.04),
'restock-rcs-block-quad-angled-1': (0.02, 0.04),
'roverWheelM1-F': (0.02, 0.04),
'roverWheel2': (0.02, 0.04),
'wheelMed': (0.02, 0.04),
'SmallGearBay': (0.02, 0.04),
'roverWheel1': (0.02, 0.04),
'restock-wheel-4': (0.02, 0.04),
'restock-wheel-1-T': (0.02, 0.04),
'DeployedRTG': (0.4, 0.04),
'FanShroud_01': (0.02, 0.04),
'Triangle1': (0.02, 0.04),
'EquiTriangle1': (0.02, 0.04),
'Triangle1': (0.02, 0.04),
'EquiTriangle1': (0.02, 0.04),
'stackPoint1': (0.02, 0.04),
'adapterSmallMiniShort': (0.02, 0.04),
'restock-fuel-tank-0625-2': (0.0225, 0.045),
'piston_04': (0.024, 0.048),
'wingConnector5': (1.25, 0.05),
'wingConnector4': (1.25, 0.05),
'StandardCtrlSrf': (1.25, 0.05),
'delta_small': (1.25, 0.05),
'wingStrake': (1.25, 0.05),
'structuralWing3': (1.25, 0.05),
'smallCargoContainer': (0.025, 0.05),
'radialDecoupler2': (0.025, 0.05),
'Separator_1': (0.025, 0.05),
'dockingPort2': (0.025, 0.05),
'airbrake1': (0.025, 0.05),
'mediumHeliBlade': (0.025, 0.05),
'roverBody_v2': (22.5, 0.15),
'restock-reactionwheel-1875-1': (22.5, 0.15),
'foldingRadSmall': (3.75, 0.05),
'radPanelLg': (3.75, 0.05),
'seatExternalCmd': (3.75, 0.05),
'probeCoreSphere': (10000, 0.05),
'RCSBlock': (10000, 0.05),
'stackDecoupler': (10000, 0.05),
'dockingPort2': (0.025, 0.05),
'adapterSmallMiniTall': (10000, 0.05),
'restock-leg-2-rigid': (0.025, 0.05),
'FuelCell': (0.5, 0.05),
'restock-rcs-block-quint-1': (0.025, 0.05),
'adapterSmallMiniTall': (0.025, 0.05),
'smallHardpoint': (0.025, 0.05),
'strutConnector': (0.025, 0.05),
'groundAnchor': (0.025, 0.05),
'fuelLine': (0.025, 0.05),
'RobotArmScanner_S2': (21, 0.14),
'solarPanelSP10C': (19.5, 0.13),
'solarPanelSP10L': (19.5, 0.13),
'restock-battery-1875-1': (18.75, 0.125),
'commDish': (15, 0.1),
'InfraredTelescope': (15, 0.1),
'parachuteSingle': (15, 0.1),
'parachuteRadial': (15, 0.1),
'probeStackSmall': (15, 0.1),
'probeCoreOcto_v2': (15, 0.1),
'probeCoreHex': (15, 0.1),
'probeCoreHex_v2': (15, 0.1),
'elevon2': (1.5, 0.06),
'ramAirIntake': (0.03, 0.06),
'restock-adapter-1875-125-1': (0.03, 0.06),
'EnginePlate5': (0.031, 0.062),
'fuelTankSmallFlat': (10000, 0.0625),
'fuelTankSmallFlat': (0.03125, 0.0625),
'restock-fueltank-sphere-125-1': (0.03125, 0.0625),
'restock-engineplate-125-2': (0.03125, 0.0625),
'restock-engineplate-125-1': (0.03125, 0.0625),
'probeCoreCube': (10000, 0.07),
'restock-service-module-125-625-1': (0.0375, 0.075),
'Mite': (0.0375, 0.075),
'fairingSize1': (1.875, 0.075),
'restock-apu-radial-1': (0.0375, 0.075),
'GrapplingDevice': (0.0375, 0.075),
'pointyNoseConeB': (5.625, 0.075),
'pointyNoseConeA': (5.625, 0.075),
'pointyNoseConeB': (10000, 0.075),
'pointyNoseConeA': (10000, 0.075),
'stackSeparator': (10000, 0.075),
'GrapplingDevice': (0.0375, 0.075),
'Panel1': (0.0375, 0.075),
'Size1to0ServiceModule': (0.0375, 0.075),
'Panel1': (0.0375, 0.075),
'structuralPanel1': (0.0375, 0.075),
'winglet3': (1.95, 0.078),
'lGripPad': (0.039, 0.078),
'lGripStrip': (0.039, 0.078),
'flagPartSize3': (0, 0.0795),
'AdvancedCanard': (2, 0.08),
'elevon3': (2, 0.08),
'elevon5': (2, 0.08),
'restock-decoupler-1875-truss-1': (0.04, 0.08),
'smallRadialEngine_v2': (0.04, 0.08),
'avionicsNoseCone': (6, 0.08),
'largeAdapter2': (10000, 0.08),
'vernierEngine': (10000, 0.08),
'hinge_03_s': (0.04, 0.08),
'hinge_01': (0.04, 0.08),
'vernierEngine': (0.04, 0.08),
'RCSFuelTank': (0.04, 0.08),
'GearSmall': (0.04, 0.08),
'rtg': (0.8, 0.08),
'largeAdapter2': (0.04, 0.08),
'structuralIBeam1': (0.04, 0.08),
'restock-node-1875-1': (0.04, 0.08),
'EquiTriangle1p5': (0.0425, 0.085),
'Triangle1p5': (0.0425, 0.085),
'EquiTriangle1p5': (0.0425, 0.085),
'Triangle1p5': (0.0425, 0.085),
'Size1p5_Strut_Decoupler': (0.045, 0.09),
'Decoupler_1p5': (0.045, 0.09),
'restock-decoupler-1875-1': (0.045, 0.09),
'smallRadialEngine': (0.045, 0.09),
'omsEngine': (10000, 0.09),
'omsEngine': (0.045, 0.09),
'restock-fuel-tank-0625-1': (0.045, 0.09),
'rotor_02s': (0.045, 0.09),
'flagPartFlat': (0, 0.09585),
'R8winglet': (2.5, 0.1),
'CanardController': (2.5, 0.1),
'structuralWing': (2.5, 0.1),
'wingConnector3': (2.5, 0.1),
'advSasModule': (15, 0.1),
'OrbitalScanner': (15, 0.1),
'restock-sciencebox-stack-1': (15, 0.1),
'restock-goocanister-625-1': (15, 0.1),
'structuralWing2': (2.5, 0.1),
'wingShuttleStrake': (2.5, 0.1),
'ServiceBay_125_v2': (0.05, 0.1),
'HeatShield1': (0.05, 0.1),
'InflatableAirlock': (0.05, 0.1),
'dockingPort1': (0.05, 0.1),
'noseConeAdapter': (7.5, 0.1),
'probeCoreOcto': (10000, 0.1),
'largeAdapter': (10000, 0.1),
'dockingPort1': (0.05, 0.1),
'ServiceBay_125': (10000, 0.1),
'stackBiCoupler': (10000, 0.1),
'adapterLargeSmallBi': (10000, 0.1),
'liquidEngineMini': (10000, 0.1),
'restock-leg-3-rigid': (0.05, 0.1),
'Size1p5_Size1_Adapter_02': (0.05, 0.1),
'Size1p5_Size0_Adapter_01': (0.05, 0.1),
'restock-fueltank-adapter-1875-125-2': (0.05, 0.1),
'restock-fueltank-adapter-1875-0625-1': (0.05, 0.1),
'restock-engineplate-25-1': (0.05, 0.1),
'rotor_02': (0.05, 0.1),
'launchClamp1': (0.05, 0.1),
'stackBiCoupler_v2': (0.05, 0.1),
'largeAdapter': (0.05, 0.1),
'Mk1FuselageStructural': (0.05, 0.1),
'adapterLargeSmallBi': (0.05, 0.1),
'restock-adapter-1875-25-1': (0.05, 0.1),
'restock-engineplate-5-1': (0.05, 0.1),
'restock-engineplate-375-1': (0.05, 0.1),
'sweptWing1': (2.825, 0.113),
'Separator_1p5': (0.06, 0.12),
'restock-separator-1875-1': (0.06, 0.12),
'shockConeIntake': (0.06, 0.12),
'largeFanBlade': (0.06, 0.12),
'largePropeller': (0.06, 0.12),
'Size_1_5_Cone': (9, 0.12),
'restock-nosecone-1875-2': (9, 0.12),
'restock-nosecone-1875-1': (9, 0.12),
'tailfin': (3.125, 0.125),
'fuelTankSmall': (10000, 0.125),
'fuelTankSmall': (0.0625, 0.125),
'RadialOreTank': (7.5625, 0.125),
'Tube1': (0.0625, 0.125),
'trussPiece1x': (0.0625, 0.125),
'restock-truss-adapter-0625-1': (0.0625, 0.125),
'restock-structural-tube-125-1': (0.0625, 0.125),
'liquidEngineMini_v2': (0.065, 0.13),
'FanShroud_02': (0.065, 0.13),
'Size1p5_Tank_01': (0.06875, 0.1375),
'restock-fueltank-sphere-1875-1': (0.06875, 0.1375),
'restock-fueltank-1875-4': (0.06875, 0.1375),
'EnginePlate1p5': (0.07, 0.14),
'restock-engineplate-1875-1': (0.07, 0.14),
'flagPartSize4': (0, 0.1431),
'wingShuttleElevon1': (3.75, 0.15),
'cargoContainer': (0.075, 0.15),
'restock-service-module-1875-1': (0.075, 0.15),
'Shrimp': (0.075, 0.15),
'fairingSize1p5': (3.75, 0.15),
'restock-fairing-base-1875-1': (3.75, 0.15),
'radialEngineBody': (0.075, 0.15),
'nacelleBody': (0.075, 0.15),
'stackTriCoupler': (10000, 0.15),
'adapterLargeSmallTri': (10000, 0.15),
'solarPanelOX10C': (13.5, 0.09),
'solarPanelOX10L': (13.5, 0.09),
'rotoServo_03': (12, 0.08),
'HighGainAntenna': (11.25, 0.075),
'radialDrogue': (11.25, 0.075),
'HighGainAntenna5_v2': (10.5, 0.07),
'HighGainAntenna5': (10.5, 0.07),
'probeCoreCube': (10.5, 0.07),
'restock-antenna-stack-3': (9, 0.06),
'RobotArmScanner_S1': (9, 0.06),
'rotoServo_02': (9, 0.06),
'DeployedWeatherStn': (9, 0.06),
'restock-antenna-stack-2': (8.25, 0.055),
'mediumDishAntenna': (7.5, 0.05),
'batteryBank': (7.5, 0.05),
'probeCoreSphere_v2': (7.5, 0.05),
'restock-drone-core-0625-1': (7.5, 0.05),
'Triangle2': (0.075, 0.15),
'EquiTriangle2': (0.075, 0.15),
'ServiceModule18': (0.075, 0.15),
'Triangle2': (0.075, 0.15),
'EquiTriangle2': (0.075, 0.15),
'stackTriCoupler_v2': (0.075, 0.15),
'adapterLargeSmallTri': (0.075, 0.15),
'structuralMiniNode': (0.075, 0.15),
'Decoupler_2': (0.08, 0.16),
'piston_01': (0.08, 0.16),
'GearLarge': (0.08, 0.16),
'GearMedium': (0.08, 0.16),
'airlinerCtrlSrf': (4.25, 0.17),
'MK1IntakeFuselage': (0.085, 0.17),
'Panel1p5': (0.085, 0.17),
'Panel1p5': (0.085, 0.17),
'fairingSize2': (4.375, 0.175),
'stackQuadCoupler': (10000, 0.175),
'sasModule': (7.5, 0.05),
'GooExperiment': (7.5, 0.05),
'Magnetometer': (7.5, 0.05),
'ScienceBox': (7.5, 0.05),
'DeployedCentralStation': (7.5, 0.05),
'LgRadialSolarPanel': (6, 0.04),
'probeCoreOcto2_v2': (6, 0.04),
'DeployedGoExOb': (6, 0.04),
'DeployedSeismicSensor': (5.25, 0.035),
'DeployedSatDish': (5.25, 0.035),
'fireworksLauncherBig': (4.5, 0.03),
'restock-reactionwheel-radial-1': (4.5, 0.03),
'solarPanels1': (3.75, 0.025),
'solarPanels2': (3.75, 0.025),
'DeployedIONExp': (3.75, 0.025),
'ksp_r_largeBatteryPack': (3, 0.02),
'evaJetpack': (3, 0.02),
'ConformalStorageUnit': (3, 0.02),
'solarPanels3': (2.625, 0.0175),
'solarPanels4': (2.625, 0.0175),
'SurfAntenna': (2.25, 0.015),
'stackQuadCoupler': (0.0875, 0.175),
'largeHeliBlade': (0.09, 0.18),
'LiquidEngineRV-1': (0.09, 0.18),
'restock-engine-panda-1': (0.09, 0.18),
'structuralIBeam3': (0.09375, 0.1875),
'xenonTankLarge': (0.095, 0.19),
'wingConnector': (5, 0.2),
'deltaWing': (5, 0.2),
'wingConnector2': (5, 0.2),
'dockingPortLarge': (0.1, 0.2),
'restock-engine-125-pug': (0.1, 0.2),
'rocketNoseCone_v3': (15, 0.2),
'airplaneTail': (15, 0.2),
'airplaneTailB': (15, 0.2),
'rocketNoseCone_v2': (15, 0.2),
'rocketNoseCone': (10000, 0.2),
'dockingPortLarge': (0.1, 0.2),
'Size3to2Adapter': (10000, 0.2),
'adapterLargeSmallQuad': (10000, 0.2),
'hinge_03': (0.1, 0.2),
'restock-airlock-1': (0.1, 0.2),
'structuralPylon': (0.1, 0.2),
'adapterLargeSmallQuad': (0.1, 0.2),
'restock-truss-hub-1': (0.1, 0.2),
'Separator_2': (0.105, 0.21),
'restock-service-bay-1875-1': (0.1125, 0.225),
'sweptWing2': (5.65, 0.226),
'wingShuttleElevon2': (5.75, 0.23),
'FuelCellArray': (2.4, 0.24),
'mk2CargoBayS': (0.125, 0.25),
'miniJetEngine': (0.125, 0.25),
'ionEngine': (0.125, 0.25),
'MiniDrill': (18.75, 0.25),
'foldingRadMed': (18.75, 0.25),
'fuelTank': (10000, 0.25),
'MK1Fuselage': (0.125, 0.25),
'Size1p5_Monoprop': (0.125, 0.25),
'fuelTank': (0.125, 0.25),
'restock-fuel-tank-rcs-1875-1': (0.125, 0.25),
'EnginePlate2': (0.125, 0.25),
'trussAdapter': (0.125, 0.25),
'sweptWing': (6.875, 0.275),
'Size1p5_Tank_02': (0.1375, 0.275),
'restock-fueltank-1875-3': (0.1375, 0.275),
'mk2FuselageShortLiquid': (0.145, 0.29),
'mk2FuselageShortLFO': (0.145, 0.29),
'mk2SpacePlaneAdapter': (0.145, 0.29),
'mk2_1m_Bicoupler': (0.145, 0.29),
'restock-engine-torch': (0.145, 0.29),
'mk2FuselageShortMono': (0.145, 0.29),
'ServiceBay_250_v2': (0.15, 0.3),
'HeatShield1p5': (0.15, 0.3),
'restock-heatshield-1875-1': (0.15, 0.3),
'mk2DockingPort': (0.15, 0.3),
'dockingPortLateral': (0.15, 0.3),
'mk2DockingPort': (0.15, 0.3),
'ServiceBay_250': (10000, 0.3),
'dockingPortLateral': (0.15, 0.3),
'piston_03': (0.15, 0.3),
'Panel2': (0.15, 0.3),
'Panel2': (0.15, 0.3),
'structuralPanel2': (0.15, 0.3),
'restock-adapter-skeletal-25-375-1': (0.175, 0.35),
'airlinerTailFin': (9, 0.36),
'Decoupler_3': (0.18, 0.36),
'Size1p5_Size1_Adapter_01': (0.1875, 0.375),
'restock-fueltank-adapter-1875-125-1': (0.1875, 0.375),
'Tube1p5': (0.1875, 0.375),
'trussPiece3x': (0.1875, 0.375),
'structuralIBeam2': (0.1875, 0.375),
'restock-structural-tube-1875-1': (0.1875, 0.375),
'CargoStorageUnit': (0.2, 0.4),
'radialDecoupler1-2': (0.2, 0.4),
'rocketNoseConeSize3': (30, 0.4),
'decoupler1-2': (10000, 0.4),
'hinge_04': (0.2, 0.4),
'RCSTank1-2': (0.2, 0.4),
'MtmStage': (31.125, 0.415),
'FanShroud_03': (0.21, 0.42),
'wingShuttleRudder': (11.25, 0.45),
'solidBooster_sm_v2': (0.225, 0.45),
'restock-srb-striker-1': (0.225, 0.45),
'restock-srb-mallet-1': (0.225, 0.45),
'restock-docking-375-1': (0.225, 0.45),
'stackSeparatorBig': (10000, 0.45),
'solidBooster_sm': (10000, 0.45),
'fairingSize3': (11.875, 0.475),
'Separator_3': (0.24, 0.48),
'wingShuttleDelta': (0.25, 0.5),
'mk2CargoBayL': (0.25, 0.5),
'HeatShield2': (0.25, 0.5),
'liquidEngine3_v2': (0.25, 0.5),
'fuelTank_long': (10000, 0.5),
'fuelTank4-2': (10000, 0.5),
'liquidEngine3': (10000, 0.5),
'fuelTank_long': (0.25, 0.5),
'Rockomax8BW': (0.25, 0.5),
'restock-fueltank-sphere-25-1': (0.25, 0.5),
'restock-engine-les-2': (0.25, 0.5),
'SmallTank': (0.25, 0.5),
'ServiceModule25': (0.25, 0.5),
'restock-adapter-hollow-25-375-1': (0.25, 0.5),
'rotor_03s': (0.275, 0.55),
'Size1p5_Tank_03': (0.28125, 0.5625),
'restock-fueltank-1875-2': (0.28125, 0.5625),
'mk2Fuselage': (0.285, 0.57),
'mk2FuselageLongLFO': (0.285, 0.57),
'mk2_1m_AdapterLong': (0.285, 0.57),
'adapterSize2-Size1': (0.285, 0.57),
'adapterSize2-Mk2': (0.285, 0.57),
'adapterSize2-Size1Slant': (0.285, 0.57),
'EnginePlate3': (0.29, 0.58),
'landerCabinSmall': (45, 0.6),
'RotorEngine_02': (0.3, 0.6),
'rotor_03': (0.3, 0.6),
'Decoupler_4': (0.32, 0.64),
'restock-decoupler-5-1': (0.325, 0.65),
'adapterEngines': (0.35, 0.7),
'Tube2': (0.3625, 0.725),
'restock-structural-tube-25-1': (0.3625, 0.725),
'solidBooster_v2': (0.375, 0.75),
'kv1Pod': (56.25, 0.75),
'restock-pod-sphere-1': (56.25, 0.75),
'restock-engine-125-valiant': (0.375, 0.75),
'solidBooster': (10000, 0.75),
'Size1p5_Tank_05': (0.375, 0.75),
'Size1p5_Size2_Adapter_01': (0.375, 0.75),
'restock-fueltank-adapter-25-1875-1': (0.375, 0.75),
'restock-fueltank-1875-soyuz-1': (0.375, 0.75),
'restock-truss-3': (0.375, 0.75),
'airlinerMainWing': (19.5, 0.78),
'fairingSize4': (20, 0.8),
'mk1pod_v2': (60, 0.8),
'rocketNoseConeSize4': (60, 0.8),
'restock-nosecone-5-1': (60, 0.8),
'mk1pod': (10000, 0.8),
'size3Decoupler': (10000, 0.8),
'restock-engine-schnauzer-1': (0.4, 0.8),
'restock-fairing-base-5-1': (0.4, 0.8),
'roverWheel3': (0.75, 1.5),
'Separator_4': (0.425, 0.85),
'restock-separator-5-1': (0.425, 0.85),
'restock-fuel-tank-rcs-375-1': (0.44, 0.88),
'LaunchEscapeSystem': (0.45, 0.9),
'radialLiquidEngine1-2': (0.45, 0.9),
'cupola': (70.5, 0.94),
'HeatShield3': (0.5, 1),
'MK1CrewCabin': (75, 1),
'Mark2Cockpit': (75, 1),
'foldingRadLarge': (75, 1),
'toroidalAerospike': (0.5, 1),
'LiquidEngineLV-T91': (0.5, 1),
'fuelTank2-2': (10000, 1),
'Rockomax16_BW': (0.5, 1),
'EnginePlate4': (0.5, 1),
'Size1p5_Tank_04': (0.5625, 1.125),
'restock-fueltank-1875-1': (0.5625, 1.125),
'restock-fuel-tank-375-4': (0.5625, 1.125),
'restock-fueltank-sphere-375-1': (0.5625, 1.125),
'RotorEngine_03': (0.6, 1.2),
'turboJet': (0.6, 1.2),
'restock-oretank-1875-1': (0.6, 1.2),
'Mark1Cockpit': (93.75, 1.25),
'RadialDrill': (93.75, 1.25),
'MiniISRU': (93.75, 1.25),
'LiquidEngineRK-7': (0.625, 1.25),
'spotLight2': (2.25, 0.015),
'spotLight2_v2': (2.25, 0.015),
'spotLight1': (2.25, 0.015),
'spotLight1_v2': (2.25, 0.015),
'DeployedSolarPanel': (2.25, 0.015),
'liquidEngine_v2': (0.625, 1.25),
'liquidEngine': (0.625, 1.25),
'evaScienceKit': (2.25, 0.015),
'batteryBankMini': (1.5, 0.01),
'controller1000': (1.5, 0.01),
'longAntenna': (0.75, 0.005),
'batteryPack': (0.75, 0.005),
'evaRepairKit': (0.75, 0.005),
'spotLight3': (0.75, 0.005),
'solarPanels5': (0.75, 0.005),
'EngineerChip': (0.75, 0.005),
'Engineer7500': (0.75, 0.005),
'SurfaceScanner': (0.75, 0.005),
'sensorAccelerometer': (0.75, 0.005),
'sensorThermometer': (0.75, 0.005),
'sensorAtmosphere': (0.75, 0.005),
'sensorBarometer': (0.75, 0.005),
'sensorGravimeter': (0.75, 0.005),
'evaChute': (0.6, 0.004),
'groundLight2': (0.45, 0.003),
'domeLight1': (0.3, 0.002),
'groundLight1': (0.3, 0.002),
'fireworksLauncherSmall': (0.1875, 0.00125),
'stripLight1': (0.15, 0.001),
'navLight1': (0.15, 0.001),
'restock-engine-ursa-1': (0.625, 1.25),
'MEMLander': (101.625, 1.355),
'mk2LanderCabin_v2': (101.625, 1.355),
'mk3FuselageMONO': (0.7, 1.4),
'adapterMk3-Mk2': (0.715, 1.43),
'mk3CargoBayS': (0.75, 1.5),
'solidBooster1-1': (0.75, 1.5),
'InflatableHeatShield': (1, 1.5),
'kv2Pod': (112.5, 1.5),
'restock-pod-sphere-2': (112.5, 1.5),
'JetEngine': (0.75, 1.5),
'liquidEngine2': (0.75, 1.5),
'liquidEngine2_v2': (0.75, 1.5),
'stationHub': (0.75, 1.5),
'Mk2Pod': (117, 1.56),
'restock-mk2-pod': (117, 1.56),
'LiquidEngineRE-I2': (0.8, 1.6),
'liquidEngine2-2_v2': (0.875, 1.75),
'liquidEngine2-2': (10000, 1.75),
'mk3FuselageLF_25': (0.895, 1.79),
'mk3FuselageLFO_25': (0.895, 1.79),
'adapterMk3-Size2Slant': (0.895, 1.79),
'adapterSize3-Mk3': (0.895, 1.79),
'adapterMk3-Size2': (0.895, 1.79),
'turboFanEngine': (0.9, 1.8),
'Size3To2Adapter_v2': (0.9375, 1.875),
'mk2Cockpit_Inline': (150, 2),
'mk2Cockpit_Standard': (150, 2),
'LiquidEngineLV-TX87': (1, 2),
'fuelTank1-2': (10000, 2),
'RAPIER': (1, 2),
'Rockomax32_BW': (1, 2),
'restock-engine-caravel-1': (1, 2),
'LargeTank': (1, 2),
'mk2CrewCabin': (152.25, 2.03),
'kv3Pod': (168.75, 2.25),
'crewCabin': (168.75, 2.25),
'restock-pod-sphere-3': (168.75, 2.25),
'Size3SmallTank': (1.125, 2.25),
'restock-nosecone-375-1': (1.125, 2.25),
'Tube3': (1.1625, 2.325),
'restock-structural-tube-375-1': (1.1625, 2.325),
'mk2LanderCabin': (187.5, 2.5),
'mk1-3pod': (195, 2.6),
'mk3CargoBayM': (1.5, 3),
'nuclearEngine': (10000, 3),
'engineLargeSkipper_v2': (1.5, 3),
'engineLargeSkipper': (10000, 3),
'LiquidEngineRE-J10': (1.65, 3.3),
'mk3Cockpit_Shuttle': (262.5, 3.5),
'Large_Crewed_Lab': (262.5, 3.5),
'restock-engine-boar': (1.75, 3.5),
'mk3FuselageLF_50': (1.785, 3.57),
'mk3FuselageLFO_50': (1.785, 3.57),
'mk3CargoRamp': (2, 4),
'SSME': (2, 4),
'Mark1-2Pod': (10000, 4),
'fuelTank3-2': (10000, 4),
'Size4_Tank_01': (2, 4),
'Size3_Size4_Adapter_01': (2, 4),
'Rockomax64_BW': (2, 4),
'restock-fueltank-adapter-375-5-1': (2, 4),
'restock-fueltank-5-4': (2, 4),
'Tube4': (2.096, 4.192),
'restock-structural-tube-5-1': (2.096, 4.192),
'ISRU': (318.75, 4.25),
'restock-oretank-375-1': (2.15, 4.3),
'turboFanSize2': (2.25, 4.5),
'MassiveBooster': (2.25, 4.5),
'Size3MediumTank': (2.25, 4.5),
'LiquidEngineKE-1': (2.5, 5),
'restock-engine-galleon-1': (2.5, 5),
'restock-engine-375-corgi': (2.625, 5.25),
'Size4_EngineAdapter_01': (2.8125, 5.625),
'restock-fueltank-saturn-engine-1': (2.8125, 5.625),
'mk3CargoBayL': (3, 6),
'liquidEngineMainsail_v2': (3, 6),
'liquidEngine1-2': (10000, 6),
'mk3FuselageLF_100': (3.57, 7.14),
'mk3FuselageLFO_100': (3.57, 7.14),
'mk3CrewCabin': (592.5, 7.9),
'Pollux': (4, 8),
'Size4_Tank_02': (4, 8),
'restock-fueltank-5-3': (4, 8),
'restock-srb-castor-1': (4, 8),
'Size3AdvancedEngine': (4.5, 9),
'Size3LargeTank': (4.5, 9),
'Thoroughbred': (5, 10),
'restock-srb-anvil-1': (5, 10),
'Size2LFB': (5.25, 10.5),
'Size2LFB_v2': (5.25, 10.5),
'restock-engine-cherenkov': (10000, 12),
'Size3EngineCluster': (7.5, 15),
'Size4_Tank_03': (8, 16),
'restock-fueltank-5-2': (8, 16),
'Clydesdale': (10.5, 21),
'Size4_Tank_04': (16, 32),
'restock-fueltank-5-1': (16, 32)}

# Fait a la vite avec mes frites
# Les 80 caractères, je les mets à terre
texts = {'welcome': ('Enter the path to the craft. Examples: "/home/kerbal/save/ssto.craft" or "ssto.craft"\n"all" to analyse every craft in the folder and recursively\n"q" to quit the program.\n"fr" for french\n', 'Entrez le chemin de votre craft. Exemples : "/home/kerbal/save/ssto.craft" ou "ssto.craft"\n"tous" pour analyser tous les crafts du dossier et recursivement\n"q" pour quitter le programme.\n"en" pour anglais.\n'),
         'name': ('Craft\'s name:', 'Nom du craft :'),
         'co2': ('Empty co2:', 'co2 à vide :'),
         'mass': ('Empty mass:', 'Masse à vide :'),
         'co2fuel': ('co2 from ergols:', 'co2 des ergols :'),
         'nofile': ('The file does not exist', 'Le fichier n\'existe pas'),
         'warn': ('Warning, one or several parts are not identified, the calcul is not good.', 'Attention, une ou plusieurs pièces ne sont pas identifiées, le calcul est incorrect.'),
         'ford': ('Warning, one or several parts are forbidden.', 'Attention, une ou plusieurs pièces sont interdites.'),
         }

# Fait pompette en chaussettes
cFu = 0.05
cOx = 0.05
cSo = 0.075
cMono = 0.04
cXenon = 0.01
cOre = 0.1
cAblator = 0.01

def read(craft_file, lang, verbose):
    # Tellements de valeurs que j'en pleure
    name = craft_file.name
    etat = ''
    uFu = 0
    uOx = 0
    uSo = 0
    uMono = 0
    uXenon = 0
    uOre = 0
    uAblator = 0
    cost = 0
    mass = 0
    is_warning = False
    is_ford = False
    if verbose:
        print(f'open: {craft_file}')
    # Tellement horrible que j'en brule ma bible
    try:
        with open(craft_file) as read_file:
            for line in read_file:
                if verbose:
                    print(f'line: {line}')
                m = re.match(r'ship = (?P<name>.+)', line.strip())
                if m is not None:
                    name = m['name']
                if line.strip() == 'PART':
                    etat = 'part'
                m = re.match(r'part = (?P<name>.+)_\d+', line.strip())
                if m is not None:
                    pname = m['name']
                    pname = pname.replace(".", "_")
                    if pname in parts:
                        pcost, pmass = parts[pname]
                        if verbose:
                            print(f'cost = {pcost}')
                        if pcost >= 10000:
                            is_ford = True
                            print('Forbidden', pname)
                        cost += pcost
                        mass += pmass
                    else:
                        is_warning = True
                        print('Warning', pname, 'not found')
                # Cascade de "if" dans ton pif
                m = re.match(r'.*name.*=.*LiquidFuel', line.strip())
                if m is not None:
                    etat = 'Fu'
                m = re.match(r'.*name.*=.*Oxidizer', line.strip())
                if m is not None:
                    etat = 'Ox'
                m = re.match(r'.*name.*=.*MonoPropellant', line.strip())
                if m is not None:
                    etat = 'Mono'
                m = re.match(r'.*name.*=.*SolidFuel', line.strip())
                if m is not None:
                    etat = 'So'
                m = re.match(r'.*name.*=.*XenonGas', line.strip())
                if m is not None:
                    etat = 'Xenon'
                m = re.match(r'.*name.*=.*Ore', line.strip())
                if m is not None:
                    etat = 'Ore'
                m = re.match(r'.*name.*=.*Ablator', line.strip())
                if m is not None:
                    etat = 'Ablator'
                m = re.match(r'.*amount.*=[^0-9]*(?P<amount>\d+)', line.strip())
                if etat == 'Fu' and m is not None:
                    uFu += float(m['amount'])
                elif etat == 'Ox' and m is not None:
                    uOx += float(m['amount'])
                elif etat == 'So' and m is not None:
                    uSo += float(m['amount'])
                elif etat == 'Mono' and m is not None:
                    uMono += float(m['amount'])
                elif etat == 'Xenon' and m is not None:
                    uXenon += float(m['amount'])
                elif etat == 'Ore' and m is not None:
                    uOre += float(m['amount'])
                elif etat == 'Ablator' and m is not None:
                    uAblator += float(m['amount'])
                if '}' in line:
                    etat = ''
                if verbose:
                    print('co2fuel =', uFu * cFu + uOx * cOx + uSo * cSo + uMono * cMono + uXenon * cXenon + uOre * cOre + uAblator * cAblator)
                    print('co2total =', cost)
        # J'encule ce calcul
        co2fuel = uFu * cFu + uOx * cOx + uSo * cSo + uMono * cMono + uXenon * cXenon
        co2fuel += uOre * cOre + uAblator * cAblator
        print('\n--------')
        print(texts['name'][lang], f'{name} ({craft_file})')
        print(texts['co2'][lang], cost)
        print(texts['mass'][lang], mass)
        print(texts['co2fuel'][lang], co2fuel)
        if is_warning:
            print(texts['warn'][lang])
        if is_ford:
            print(texts['ford'][lang])
        print('--------\n\n')
    except UnicodeDecodeError:
        return


def allf(p, lang, verbose):
    # C'est un nom vraiment pas bon
    for f in p.iterdir():
        if f.name[-6:] == '.craft':
            read(f, lang, verbose)
        if Path.is_dir(f):
            allf(f)


def main():
    e = ''
    lang = 0
    verbose = False
    # mal foutu avec mon cul
    exitt = ('q', 'exit', 'quit', 'nique', 'quitter', 's', 'sortir')
    allt = ('a', 'all', 't', 'tous', 'vazy met moi bien')
    while e not in exitt:
        print(texts['welcome'][lang])
        e = input('$ ')
        if e == 'fr':
            lang = 1
        elif e == 'en':
            lang = 0
        elif e in allt:
            p = Path.cwd()
            allf(p, lang, verbose)
        elif e not in exitt:
            craft_file = Path(e)
            if craft_file.is_file():
                read(craft_file, lang, verbose)
            else:
                print(texts['nofile'][lang])


if __name__ == '__main__':
    main()
